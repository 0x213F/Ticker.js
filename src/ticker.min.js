var TickerCount=0,Ticker=function(a,b,c,d,e,f){var c=void 0===c?500:c,a=a,b=b,g=[],h=[],i=TickerCount;TickerCount++;var m,n,o,j=!1,k=!1,l=this;if("function"==typeof d)o=d;else switch(d){case"linear":o=function(a,b,c){return a};break;case"easeInOutQuad":o=function(a,b,c){return c/2>b?2*Math.pow(a,2):-2*Math.pow(a-1,2)+1};break;case"easeInOutSine":o=function(a,b,c){return-.5*Math.cos(10*a/Math.PI)+.5};break;default:o=function(a,b,c){return c/2>b?2*Math.pow(a,2):-2*Math.pow(a-1,2)+1}}return this.initialize=function(c){function d(a){return a==b.length-1?b[0]:b[Number(a)+1]}var e,m,n,o,q,r,f=document.getElementById(a),l=f;g=f.textContent.split("");for(e in g)j[e]=!1,k[e]=!1;for(;f.lastChild;)f.removeChild(f.lastChild);for(e in b)q="stock_ticker_"+e+"_"+i,r=document.head.appendChild(document.createElement("style")),r.type="text/css",r.innerHTML="."+q+":before {  content: '"+d(e)+"';position: absolute; top: 0em; left: 0em}";var s=b.join("");for(var e in g)h[e]=s.indexOf(g[e]);o=document.createElement("TICKER_MASK"),l.appendChild(o),l=o;for(var e in g)n=document.createElement("TICKER"),m=document.createTextNode(g[e]),n.appendChild(m),n.className="stock_ticker_"+b.indexOf(g[e])+"_"+i,n.id="stock_ticker_id_"+e+"_"+i,l.appendChild(n)},this.terminate=function(b){for(var c=document.getElementById(a);c.lastChild;)c.removeChild(c.lastChild);c.textContent=g.join("")},this.update=function(a,d){function e(a,e,f){function g(e){if(k[e])return j[e]=!1,k[e]=!1,void l.update(m,n);var r=new Date,s=r.getTime()-q.getTime();if(s>=c){var t=Number(a+f);p.className="stock_ticker_"+t+"_"+i,p.childNodes[0].nodeValue=b[t],p.style.bottom="0em",h[e]=a+f,j[e]=!1,"function"==typeof d&&d()}else{var u=s/c,v=o(u,s,c),t=Math.floor(a+v*f);p.className="stock_ticker_"+t+"_"+i,p.style.bottom=t-a-v*f+"em",p.childNodes[0].nodeValue=b[t],h[e]=a+v*f,requestAnimationFrame(function(){g(e)})}}var p=document.getElementById("stock_ticker_id_"+e+"_"+i),q=new Date;requestAnimationFrame(function(){j[e]=!0,g(e)})}if(a.length!==g.length)return void console.log(a.length,g.length);var f=a.split("");for(var p in f){var r=(document.getElementById("stock_ticker_id_"+p+"_"+i).textContent,b.indexOf(f[p])-h[p]);if(0!==r){if(j[p])return k[p]=!0,m[p]=a,void(n[p]=d);var s=Number(h[p]);e(s,p,r)}}g=a.split("")},(e||void 0===e)&&this.initialize(f),this};
